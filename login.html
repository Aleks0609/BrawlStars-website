<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Brawl Stars Spieler Informationen</title>
    <style>
        /* Stil für das Container-Div, das das Eingabefeld und den Button enthält */
        #loginContainer {
            position: absolute;
            top: 10px;
            right: 10px;
            text-align: right;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            // Wenn der Knopf mit der ID fetchButton "click()" ed wurde.
            $('#fetchButton').click(function() {
                // Hole den Spieler-Tag aus dem Eingabefeld
                var playerTag = $('#playerTag').val().toUpperCase().replace('#', '%23');
                
                // Von wo erhalten wir unsere Informationen
                $.ajax({
                    url: 'login.php',
                    type: 'POST',
                    data: { playerTag: playerTag },
                    dataType: 'json',
                    // success ist der Bereich der ausgeführt wird wenn der CALL erfolgreich war.
                    success: function(data) {
                        console.log(data);
                        // info als HTML-Gerüst wird vorbereitet
                        var info = '<h2>' + data.name + ' (' + data.tag + ')</h2>';
                        info += '<p>Trophäen: ' + data.trophies + '</p>';
                        info += '<p>Level: ' + data.expLevel + '</p>';
                        // info wird nun in das div mit der ID playerInfo eingefügt
                        $('#playerInfo').html(info);
                    },
                    // Bei einer fehlerhaften Abfrage
                    error: function() {
                        alert('Fehler beim Abrufen der Spieler-Daten!');
                    }
                });
            });
        });
    </script>
</head>
<body>
    <h1>Brawl Stars Spieler Informationen</h1>
    <!-- Container für das Eingabefeld und den Button -->
    <div id="loginContainer">
        <input type="text" id="playerTag" placeholder="Spieler-Tag eingeben">
        <button id="fetchButton">Hole Spieler Informationen</button>
    </div>
    <div id="playerInfo"></div>
</body>
</html>